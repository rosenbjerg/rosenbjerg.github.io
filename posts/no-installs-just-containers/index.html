<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>No installs - just containers | Rosenbjerg blog</title><meta name=keywords content="docker,bat,containers"><meta name=description content="It can be annoying to install a tool that is only needed a few times, and it would be preferable to avoid the installation process. However, sometimes it is necessary to use a tool to accomplish a specific task
Solution To avoid the inconvenience of installing tools that are only needed occasionally, I have started using containerized tools instead. To make it easier to use these containerized tools, I have created a number of ."><meta name=author content><link rel=canonical href=https://rosenbjerg.dk/posts/no-installs-just-containers/><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://rosenbjerg.dk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://rosenbjerg.dk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://rosenbjerg.dk/favicon-32x32.png><link rel=apple-touch-icon href=https://rosenbjerg.dk/apple-touch-icon.png><link rel=mask-icon href=https://rosenbjerg.dk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.113.0"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="No installs - just containers"><meta property="og:description" content="It can be annoying to install a tool that is only needed a few times, and it would be preferable to avoid the installation process. However, sometimes it is necessary to use a tool to accomplish a specific task
Solution To avoid the inconvenience of installing tools that are only needed occasionally, I have started using containerized tools instead. To make it easier to use these containerized tools, I have created a number of ."><meta property="og:type" content="article"><meta property="og:url" content="https://rosenbjerg.dk/posts/no-installs-just-containers/"><meta property="og:image" content="https://rosenbjerg.dk/images/terminal.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-30T22:17:58+01:00"><meta property="article:modified_time" content="2022-11-30T22:17:58+01:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rosenbjerg.dk/images/terminal.png"><meta name=twitter:title content="No installs - just containers"><meta name=twitter:description content="It can be annoying to install a tool that is only needed a few times, and it would be preferable to avoid the installation process. However, sometimes it is necessary to use a tool to accomplish a specific task
Solution To avoid the inconvenience of installing tools that are only needed occasionally, I have started using containerized tools instead. To make it easier to use these containerized tools, I have created a number of ."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://rosenbjerg.dk/posts/"},{"@type":"ListItem","position":2,"name":"No installs - just containers","item":"https://rosenbjerg.dk/posts/no-installs-just-containers/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"No installs - just containers","name":"No installs - just containers","description":"It can be annoying to install a tool that is only needed a few times, and it would be preferable to avoid the installation process. However, sometimes it is necessary to use a tool to accomplish a specific task\nSolution To avoid the inconvenience of installing tools that are only needed occasionally, I have started using containerized tools instead. To make it easier to use these containerized tools, I have created a number of .","keywords":["docker","bat","containers"],"articleBody":"It can be annoying to install a tool that is only needed a few times, and it would be preferable to avoid the installation process. However, sometimes it is necessary to use a tool to accomplish a specific task\nSolution To avoid the inconvenience of installing tools that are only needed occasionally, I have started using containerized tools instead. To make it easier to use these containerized tools, I have created a number of .bat files that wrap the docker run ... command and automatically mount the current working directory as a volume in the Docker container, and set the working directory in the Docker container to the mounted volume. These .bat files are placed in a directory that is included in the Path environment variable, so that they can be easily run from the command line or from an IDE. This allows me to use the tools inside the Docker container without having to type the docker run ... command every time.\nBat files to the rescue The idea with the .bat files is to wrap the docker run ... invocation and automatically mount the current working directory into the container and set that as the working directory inside the container. The %* variable expands into the arguments passed to the bat file invocation, making it a very convinient way to pass arguments to the tool inside the container\nExample bat file: ffmpeg Heres an example of such a .bat file, for using ffmpeg from a container\n@echo off docker run --rm -it -v %CD%:/data --workdir /data jrottenberg/ffmpeg:5-alpine %* This example is using an ffmpeg image from jrottenberg , since there is no official image for ffmpeg\nSaving this in a .bat file named docker-ffmpeg.bat (or just ffmpeg.bat) and placing that in a directory that is included in Path allows for using ffmpeg from cmd or powershell\ndocker-ffmpeg -version which gives the following output:\nffmpeg version 5.0.2 Copyright (c) 2000-2022 the FFmpeg developers built with gcc 10.2.1 (Alpine 10.2.1_pre1) 20201203 configuration: --disable-debug --disable-doc --disable-ffplay --enable-fontconfig --enable-gpl --enable-libaom --enable-libaribb24 --enable-libass --enable-libbluray --enable-libfdk_aac --enable-libfreetype --enable-libkvazaar --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libopus --enable-libsrt --enable-libtheora --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxcb --enable-libxvid --enable-libzmq --enable-nonfree --enable-openssl --enable-postproc --enable-shared --enable-small --enable-version3 --extra-cflags=-I/opt/ffmpeg/include --extra-ldflags=-L/opt/ffmpeg/lib --extra-libs=-ldl --extra-libs=-lpthread --prefix=/opt/ffmpeg libavutil 57. 17.100 / 57. 17.100 libavcodec 59. 18.100 / 59. 18.100 libavformat 59. 16.100 / 59. 16.100 libavdevice 59. 4.100 / 59. 4.100 libavfilter 8. 24.100 / 8. 24.100 libswscale 6. 4.100 / 6. 4.100 libswresample 4. 3.100 / 4. 3.100 libpostproc 56. 3.100 / 56. 3.100 Which gives an indication that things are working as intended.\nDoing a conversion with the following command confirms it:\ndocker-ffmpeg -i test.mp4 -preset veryfast test.webm Side-notes Only current directory is available My current approach is to use the %CD% variable to mount the current working directory as a volume in the Docker container. This means that only the files and directories in the current working directory are available inside the Docker container. This can be useful for accessing files that are needed by the tool inside the Docker container, and for storing the output of the tool in the current working directory.\nUsage from other applications When the -it arguments are included in the command, an error message similar to the input device is not a TTY may be displayed. To avoid this error, the -it arguments can be removed from the docker run .. command, so that the tool can run in a headless environment without requiring access to a TTY\nLinux alternative The linux alternative is just to create an alias instead of a .bat file. Such aliases could be added to the .profile file to be available everywhere\nMore bat files You can find a couple more examples of in this my bat-launchers repository\n","wordCount":"626","inLanguage":"en","image":"https://rosenbjerg.dk/images/terminal.png","datePublished":"2022-11-30T22:17:58+01:00","dateModified":"2022-11-30T22:17:58+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://rosenbjerg.dk/posts/no-installs-just-containers/"},"publisher":{"@type":"Organization","name":"Rosenbjerg blog","logo":{"@type":"ImageObject","url":"https://rosenbjerg.dk/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://rosenbjerg.dk/ accesskey=h title="Rosenbjerg blog (Alt + H)">Rosenbjerg blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>No installs - just containers</h1><div class=post-meta><span title='2022-11-30 22:17:58 +0100 +0100'>November 30, 2022</span></div></header><figure class=entry-cover><img loading=lazy src=https://rosenbjerg.dk/images/terminal.png alt="Windows Terminal"></figure><div class=post-content><p>It can be annoying to install a tool that is only needed a few times, and it would be preferable to avoid the installation process. However, sometimes it is necessary to use a tool to accomplish a specific task</p><h2 id=solution>Solution<a hidden class=anchor aria-hidden=true href=#solution>#</a></h2><p>To avoid the inconvenience of installing tools that are only needed occasionally, I have started using containerized tools instead. To make it easier to use these containerized tools, I have created a number of <code>.bat</code> files that wrap the <code>docker run ...</code> command and automatically mount the current working directory as a volume in the Docker container, and set the working directory in the Docker container to the mounted volume. These <code>.bat</code> files are placed in a directory that is included in the <code>Path</code> environment variable, so that they can be easily run from the command line or from an IDE. This allows me to use the tools inside the Docker container without having to type the <code>docker run ...</code> command every time.</p><h3 id=bat-files-to-the-rescue>Bat files to the rescue<a hidden class=anchor aria-hidden=true href=#bat-files-to-the-rescue>#</a></h3><p>The idea with the <code>.bat</code> files is to wrap the <code>docker run ...</code> invocation and automatically mount the current working directory into the container and set that as the working directory inside the container. The <code>%*</code> variable expands into the arguments passed to the bat file invocation, making it a very convinient way to pass arguments to the tool inside the container</p><h3 id=example-bat-file-ffmpeg>Example bat file: ffmpeg<a hidden class=anchor aria-hidden=true href=#example-bat-file-ffmpeg>#</a></h3><p>Heres an example of such a <code>.bat</code> file, for using <code>ffmpeg</code> from a container</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>@<span style=color:#66d9ef>echo</span> off
</span></span><span style=display:flex><span>docker run --rm -it -v %CD%:/data --workdir /data jrottenberg/ffmpeg:5-alpine %*
</span></span></code></pre></div><p>This example is using an <code>ffmpeg</code> image from <a href=https://github.com/jrottenberg/ffmpeg target=_blank>jrottenberg</a>
, since there is no official image for <code>ffmpeg</code></p><p>Saving this in a <code>.bat</code> file named <code>docker-ffmpeg.bat</code> (or just <code>ffmpeg.bat</code>) and placing that in a directory that is included in <code>Path</code> allows for using <code>ffmpeg</code> from <code>cmd</code> or <code>powershell</code></p><pre tabindex=0><code>docker-ffmpeg -version
</code></pre><p>which gives the following output:</p><pre tabindex=0><code>ffmpeg version 5.0.2 Copyright (c) 2000-2022 the FFmpeg developers
built with gcc 10.2.1 (Alpine 10.2.1_pre1) 20201203
configuration: --disable-debug --disable-doc --disable-ffplay --enable-fontconfig --enable-gpl --enable-libaom --enable-libaribb24 --enable-libass --enable-libbluray --enable-libfdk_aac --enable-libfreetype --enable-libkvazaar --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libopus --enable-libsrt --enable-libtheora --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxcb --enable-libxvid --enable-libzmq --enable-nonfree --enable-openssl --enable-postproc --enable-shared --enable-small --enable-version3 --extra-cflags=-I/opt/ffmpeg/include --extra-ldflags=-L/opt/ffmpeg/lib --extra-libs=-ldl --extra-libs=-lpthread --prefix=/opt/ffmpeg
libavutil      57. 17.100 / 57. 17.100
libavcodec     59. 18.100 / 59. 18.100
libavformat    59. 16.100 / 59. 16.100
libavdevice    59.  4.100 / 59.  4.100
libavfilter     8. 24.100 /  8. 24.100
libswscale      6.  4.100 /  6.  4.100
libswresample   4.  3.100 /  4.  3.100
libpostproc    56.  3.100 / 56.  3.100
</code></pre><p>Which gives an indication that things are working as intended.</p><p>Doing a conversion with the following command confirms it:</p><pre tabindex=0><code>docker-ffmpeg -i test.mp4 -preset veryfast test.webm
</code></pre><h2 id=side-notes>Side-notes<a hidden class=anchor aria-hidden=true href=#side-notes>#</a></h2><h3 id=only-current-directory-is-available>Only current directory is available<a hidden class=anchor aria-hidden=true href=#only-current-directory-is-available>#</a></h3><p>My current approach is to use the <code>%CD%</code> variable to mount the current working directory as a volume in the Docker container. This means that only the files and directories in the current working directory are available inside the Docker container. This can be useful for accessing files that are needed by the tool inside the Docker container, and for storing the output of the tool in the current working directory.</p><h3 id=usage-from-other-applications>Usage from other applications<a hidden class=anchor aria-hidden=true href=#usage-from-other-applications>#</a></h3><p>When the <code>-it</code> arguments are included in the command, an error message similar to <code>the input device is not a TTY</code> may be displayed. To avoid this error, the <code>-it</code> arguments can be removed from the <code>docker run ..</code> command, so that the tool can run in a headless environment without requiring access to a <code>TTY</code></p><h3 id=linux-alternative>Linux alternative<a hidden class=anchor aria-hidden=true href=#linux-alternative>#</a></h3><p>The linux alternative is just to create an <a href=https://ss64.com/bash/alias.html target=_blank>alias</a>
instead of a <code>.bat</code> file. Such aliases could be added to the <code>.profile</code> file to be available everywhere</p><h2 id=more-bat-files>More bat files<a hidden class=anchor aria-hidden=true href=#more-bat-files>#</a></h2><p>You can find a couple more examples of in this my <a href=https://github.com/rosenbjerg/bat-launchers target=_blank>bat-launchers</a>
repository</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://rosenbjerg.dk/tags/docker/>docker</a></li><li><a href=https://rosenbjerg.dk/tags/bat/>bat</a></li><li><a href=https://rosenbjerg.dk/tags/containers/>containers</a></li></ul></footer><script src=https://utteranc.es/client.js repo=rosenbjerg/rosenbjerg.github.io issue-term=pathname label=comment theme=preferred-color-scheme crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=https://rosenbjerg.dk/>Rosenbjerg blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>