<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>A workaround for the solution (file) | Rosenbjerg blog</title><meta name=keywords content="c#,development,dotnet-tool,git-hook"><meta name=description content="Dealing with merge conflicts in the solution (.sln) file is a pain, and it seems I am not the only one annoyed by the cryptic format:
[Discussion] Clean up sln (VisualStudio solution) files Nick Craver on Twitter Sadly Microsoft hasn&rsquo;t done anything to improve the situation (yet), but people in the .NET community has played around with creating a new format for the solution file: JeffCyr/MSBuild.SolutionSdk .
While such an approach is very interesting and could be the future of ."><meta name=author content><link rel=canonical href=https://rosenbjerg.dk/posts/a-workaround-for-the-solution/><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://rosenbjerg.dk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://rosenbjerg.dk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://rosenbjerg.dk/favicon-32x32.png><link rel=apple-touch-icon href=https://rosenbjerg.dk/apple-touch-icon.png><link rel=mask-icon href=https://rosenbjerg.dk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.113.0"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="A workaround for the solution (file)"><meta property="og:description" content="Dealing with merge conflicts in the solution (.sln) file is a pain, and it seems I am not the only one annoyed by the cryptic format:
[Discussion] Clean up sln (VisualStudio solution) files Nick Craver on Twitter Sadly Microsoft hasn&rsquo;t done anything to improve the situation (yet), but people in the .NET community has played around with creating a new format for the solution file: JeffCyr/MSBuild.SolutionSdk .
While such an approach is very interesting and could be the future of ."><meta property="og:type" content="article"><meta property="og:url" content="https://rosenbjerg.dk/posts/a-workaround-for-the-solution/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-30T19:20:01+01:00"><meta property="article:modified_time" content="2022-03-30T19:20:01+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="A workaround for the solution (file)"><meta name=twitter:description content="Dealing with merge conflicts in the solution (.sln) file is a pain, and it seems I am not the only one annoyed by the cryptic format:
[Discussion] Clean up sln (VisualStudio solution) files Nick Craver on Twitter Sadly Microsoft hasn&rsquo;t done anything to improve the situation (yet), but people in the .NET community has played around with creating a new format for the solution file: JeffCyr/MSBuild.SolutionSdk .
While such an approach is very interesting and could be the future of ."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://rosenbjerg.dk/posts/"},{"@type":"ListItem","position":2,"name":"A workaround for the solution (file)","item":"https://rosenbjerg.dk/posts/a-workaround-for-the-solution/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"A workaround for the solution (file)","name":"A workaround for the solution (file)","description":"Dealing with merge conflicts in the solution (.sln) file is a pain, and it seems I am not the only one annoyed by the cryptic format:\n[Discussion] Clean up sln (VisualStudio solution) files Nick Craver on Twitter Sadly Microsoft hasn\u0026rsquo;t done anything to improve the situation (yet), but people in the .NET community has played around with creating a new format for the solution file: JeffCyr/MSBuild.SolutionSdk .\nWhile such an approach is very interesting and could be the future of .","keywords":["c#","development","dotnet-tool","git-hook"],"articleBody":"Dealing with merge conflicts in the solution (.sln) file is a pain, and it seems I am not the only one annoyed by the cryptic format:\n[Discussion] Clean up sln (VisualStudio solution) files Nick Craver on Twitter Sadly Microsoft hasn’t done anything to improve the situation (yet), but people in the .NET community has played around with creating a new format for the solution file: JeffCyr/MSBuild.SolutionSdk .\nWhile such an approach is very interesting and could be the future of .NET solutions, I wanted something a bit less drastic. At least for now\nApproach I decided to approach it somewhat differently. Instead of replacing the sln file all together, I decided to solve it with an object-oriented approach; by putting a layer of abstraction in front of the sln file\nI like the yaml format for its readability, and decided to use this format for the abstracted solution file. The idea being to use a yaml specification of the solution to generate a “clean” solution file. The yaml specification, being much simpler to read and reason about, should be much easier to resolve merge conflicts in\nI have published this tool as a .NET tool on NuGet: dotnet-simple-sln You can install it globally with:\ndotnet tool install -g dotnet-simple-sln Usage Usage is pretty simple: To start using it with an existing solution, use the derive command:\nsimple-sln derive -i MySolution.sln which will derive a yaml specification from the solution named MySolution.sln.yaml.\nAfter checking this file into git, you can keep it up-to-date by also adding a git pre-commit hook:\n#!/bin/sh SLN_FILE=\"SimpleSolution.sln\" simple-sln cleanup -i ${SLN_FILE} -s git add \"${SLN_FILE}\" \"${SLN_FILE}.yaml\" which runs the cleanup command on the solution file, and optionally adds the updated sln and yaml files to the commit.\nYou can omit or comment out the git add .. line if you don’t want to automatically include the updated .sln file in your commit.\nYou can also just omit -s from the command and \"${SLN_FILE}.yaml\" from the git add line if you don’t want to automatically include the updated .sln.yaml file in your commit\nAfter setting this up, the sln file should be aligned no matter which IDEs and IDE versions (looking at you VS) that your team members are using.\nThat alone should reduce the number of merge conflicts. And checking in the solution specification file should make reviewing changes to the solution structure much simpler, especially if your team is using virtual folders in the solution\n","wordCount":"410","inLanguage":"en","datePublished":"2022-03-30T19:20:01+01:00","dateModified":"2022-03-30T19:20:01+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://rosenbjerg.dk/posts/a-workaround-for-the-solution/"},"publisher":{"@type":"Organization","name":"Rosenbjerg blog","logo":{"@type":"ImageObject","url":"https://rosenbjerg.dk/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://rosenbjerg.dk/ accesskey=h title="Rosenbjerg blog (Alt + H)">Rosenbjerg blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>A workaround for the solution (file)</h1><div class=post-meta><span title='2022-03-30 19:20:01 +0100 +0100'>March 30, 2022</span></div></header><div class=post-content><p>Dealing with merge conflicts in the solution (.sln) file is a pain, and it seems I am not the only one annoyed by the cryptic format:</p><ul><li><a href=https://github.com/dotnet/msbuild/issues/1730#issue-209239193 target=_blank>[Discussion] Clean up sln (VisualStudio solution) files</a></li><li><a href=https://twitter.com/Nick_Craver/status/1176924151250071553 target=_blank>Nick Craver on Twitter</a></li></ul><p>Sadly Microsoft hasn&rsquo;t done anything to improve the situation (yet), but people in the .NET community has played around with creating a new format for the solution file: <a href=https://github.com/JeffCyr/MSBuild.SolutionSdk target=_blank>JeffCyr/MSBuild.SolutionSdk</a>
.</p><p>While such an approach is very interesting and could be the future of .NET solutions, I wanted something a bit less drastic. At least for now</p><h2 id=approach>Approach<a hidden class=anchor aria-hidden=true href=#approach>#</a></h2><p>I decided to approach it somewhat differently.
Instead of replacing the sln file all together, I decided to solve it with an object-oriented approach; <em>by putting a layer of abstraction</em> in front of the sln file</p><p>I like the yaml format for its readability, and decided to use this format for the abstracted solution file.
The idea being to use a yaml specification of the solution to generate a &ldquo;clean&rdquo; solution file.
The yaml specification, being much simpler to read and reason about, should be much easier to resolve merge conflicts in</p><p>I have published this tool as a .NET tool on NuGet: <a href=https://www.nuget.org/packages/dotnet-simple-sln/ target=_blank>dotnet-simple-sln</a></p><p>You can install it globally with:</p><pre tabindex=0><code>dotnet tool install -g dotnet-simple-sln
</code></pre><h2 id=usage>Usage<a hidden class=anchor aria-hidden=true href=#usage>#</a></h2><p>Usage is pretty simple:
To start using it with an existing solution, use the <code>derive</code> command:</p><pre tabindex=0><code>simple-sln derive -i MySolution.sln
</code></pre><p>which will derive a yaml specification from the solution named <code>MySolution.sln.yaml</code>.</p><p>After checking this file into git, you can keep it up-to-date by also adding a git pre-commit hook:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e>#!/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>SLN_FILE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;SimpleSolution.sln&#34;</span>
</span></span><span style=display:flex><span>simple-sln cleanup -i <span style=color:#e6db74>${</span>SLN_FILE<span style=color:#e6db74>}</span> -s
</span></span><span style=display:flex><span>git add <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>SLN_FILE<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>SLN_FILE<span style=color:#e6db74>}</span><span style=color:#e6db74>.yaml&#34;</span>
</span></span></code></pre></div><p>which runs the <code>cleanup</code> command on the solution file, and optionally adds the updated sln and yaml files to the commit.</p><p>You can omit or comment out the <code>git add ..</code> line if you don&rsquo;t want to automatically include the updated <code>.sln</code> file in your commit.</p><p>You can also just omit <code>-s</code> from the command and <code>"${SLN_FILE}.yaml"</code> from the <code>git add</code> line if you don&rsquo;t want to automatically include the updated <code>.sln.yaml</code> file in your commit</p><p>After setting this up, the sln file should be aligned no matter which IDEs and IDE versions (looking at you VS) that your team members are using.</p><p>That alone should reduce the number of merge conflicts.
And checking in the solution specification file should make reviewing changes to the solution structure much simpler, especially if your team is using virtual folders in the solution</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://rosenbjerg.dk/tags/c#/>c#</a></li><li><a href=https://rosenbjerg.dk/tags/development/>development</a></li><li><a href=https://rosenbjerg.dk/tags/dotnet-tool/>dotnet-tool</a></li><li><a href=https://rosenbjerg.dk/tags/git-hook/>git-hook</a></li></ul></footer><script src=https://utteranc.es/client.js repo=rosenbjerg/rosenbjerg.github.io issue-term=pathname label=comment theme=preferred-color-scheme crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=https://rosenbjerg.dk/>Rosenbjerg blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>